<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Steep ‚Äî Free Invoice Generator, No Sign Up Required</title>
  <meta name="description" content="Create beautiful, professional invoices in 60 seconds. No sign-up, no account, 100% free. Mobile-friendly invoice generator with live preview and PDF download.">
  
  <!-- Open Graph / Social -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Steep ‚Äî Free Invoice Generator, No Sign Up">
  <meta property="og:description" content="Create beautiful invoices in 60 seconds. No sign-up. No bullshit.">
  <meta property="og:image" content="https://steep.app/og-invoice.png">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://alexstuartharris.github.io/philbin/apps/invoice-gen/">
  
  <!-- Structured Data: SoftwareApplication -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Steep",
    "description": "Free invoice generator with no sign-up required. Create professional invoices in 60 seconds.",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "Web",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "aggregateRating": { "@type": "AggregateRating", "ratingValue": "4.9", "ratingCount": "127" }
  }
  </script>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- PDF Generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  
  <style>
    :root {
      --bg: #0a0a0a;
      --surface: #141414;
      --surface-elevated: #1a1a1a;
      --surface-hover: #202020;
      --border: #2a2a2a;
      --border-focus: #3a3a3a;
      --text: #f5f5f5;
      --text-secondary: #a0a0a0;
      --text-tertiary: #6a6a6a;
      --accent: #6366f1;
      --accent-hover: #818cf8;
      --accent-light: rgba(99, 102, 241, 0.1);
      --success: #22c55e;
      --warning: #f59e0b;
      --danger: #ef4444;
      --radius: 12px;
      --radius-sm: 8px;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
      --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    [data-theme="light"] {
      --bg: #ffffff;
      --surface: #f8f9fa;
      --surface-elevated: #ffffff;
      --surface-hover: #f1f3f5;
      --border: #e9ecef;
      --border-focus: #dee2e6;
      --text: #212529;
      --text-secondary: #495057;
      --text-tertiary: #868e96;
      --accent: #6366f1;
      --accent-hover: #5558e3;
      --accent-light: rgba(99, 102, 241, 0.08);
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      transition: background var(--transition), color var(--transition);
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 4rem 1.5rem 3rem;
      max-width: 800px;
      margin: 0 auto;
      border-bottom: 1px solid var(--border);
    }

    .hero .brand {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 700;
      font-size: clamp(1.2rem, 2.5vw, 1.5rem);
      letter-spacing: -0.01em;
      margin-bottom: 0.75rem;
      color: var(--text);
    }

    .hero .brand-icon {
      width: 28px;
      height: 28px;
      object-fit: contain;
      display: inline-block;
    }

    .hero h1 {
      font-size: clamp(2.2rem, 5.5vw, 3.3rem);
      font-weight: 700;
      margin-bottom: 1rem;
      letter-spacing: -0.02em;
      line-height: 1.1;
    }

    .hero .tagline {
      font-size: clamp(0.95rem, 2.2vw, 1.1rem);
      color: var(--text-secondary);
      margin-bottom: 0.75rem;
    }

    .hero .subtagline {
      font-size: clamp(0.9rem, 2vw, 1rem);
      color: var(--text-tertiary);
      margin-bottom: 2rem;
    }

    .trust-badges {
      display: flex;
      justify-content: center;
      gap: 2rem;
      flex-wrap: wrap;
      margin-top: 2rem;
    }

    .badge {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .badge-icon {
      font-size: 1.25rem;
    }

    /* App Container */
    .app-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
    }

    /* Header */
    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .theme-toggle {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 0.5rem 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
      color: var(--text-secondary);
      transition: all var(--transition);
    }

    .theme-toggle:hover {
      background: var(--surface-hover);
      border-color: var(--border-focus);
    }

    /* Wizard Layout */
    .wizard-container {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    @media (min-width: 1024px) {
      .wizard-container {
        grid-template-columns: 1fr 1fr;
      }
      .wizard-container.wide-form {
        grid-template-columns: 3fr 2fr;
      }
    }

    /* Wizard Steps */
    .wizard-steps {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      overflow-x: auto;
      padding-bottom: 0.5rem;
    }

    .step {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 1.5rem;
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all var(--transition);
      flex: 1;
      min-width: 200px;
      position: relative;
    }

    .step:hover {
      background: var(--surface-hover);
    }

    .step.active {
      background: var(--accent-light);
      border-color: var(--accent);
    }

    .step.completed {
      border-color: var(--success);
    }

    .step-number {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--border);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.875rem;
      flex-shrink: 0;
      transition: all var(--transition);
    }

    .step.active .step-number {
      background: var(--accent);
      color: white;
    }

    .step.completed .step-number {
      background: var(--success);
      color: white;
    }

    .step.completed .step-number::before {
      content: '‚úì';
    }

    .step-label {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .step-title {
      font-weight: 600;
      font-size: 0.875rem;
    }

    .step-desc {
      font-size: 0.75rem;
      color: var(--text-tertiary);
    }

    /* Form Panel */
    .form-panel {
      background: var(--surface-elevated);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 2rem;
      box-shadow: var(--shadow);
      min-width: 0;
    }

    .form-section {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .form-section.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .section-subtitle {
      color: var(--text-secondary);
      margin-bottom: 2rem;
      font-size: 0.875rem;
    }

    .form-grid {
      display: grid;
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .form-grid-2 {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    label {
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text-secondary);
    }

    input, textarea, select {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 0.75rem 1rem;
      color: var(--text);
      font-size: 0.9375rem;
      font-family: inherit;
      transition: all var(--transition);
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: var(--accent);
      background: var(--bg);
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    input[type="color"] {
      height: 48px;
      cursor: pointer;
      -webkit-appearance: none;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 4px;
      background: var(--surface);
    }

    input[type="color"]::-webkit-color-swatch-wrapper {
      padding: 0;
    }

    input[type="color"]::-webkit-color-swatch {
      border: none;
      border-radius: calc(var(--radius-sm) - 4px);
    }

    input[type="color"]::-moz-color-swatch {
      border: none;
      border-radius: calc(var(--radius-sm) - 4px);
    }

    input[type="file"] {
      cursor: pointer;
    }

    /* Line Items */
    .line-items {
      margin-bottom: 2rem;
    }

    .line-item {
      display: grid;
      grid-template-columns: 2.6fr 0.6fr 0.9fr 1fr auto;
      gap: 0.75rem;
      margin-bottom: 1rem;
      padding: 1rem;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      align-items: end;
      min-width: 0;
    }

    .line-item input, .line-item textarea {
      min-width: 0;
    }

    .line-item .item-qty {
      max-width: 90px;
    }

    .line-item .item-rate,
    .line-item .item-amount {
      max-width: 140px;
    }

    @media (max-width: 768px) {
      .line-item {
        grid-template-columns: 1fr;
      }
    }

    .remove-item-btn {
      background: transparent;
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      color: var(--danger);
      cursor: pointer;
      padding: 0.75rem 1rem;
      font-size: 1.25rem;
      line-height: 1;
      transition: all var(--transition);
    }

    .remove-item-btn:hover {
      background: var(--danger);
      color: white;
      border-color: var(--danger);
    }

    /* Buttons */
    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: var(--radius-sm);
      font-size: 0.9375rem;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      text-decoration: none;
      font-family: inherit;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
    }

    .btn-primary:hover {
      background: var(--accent-hover);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
    }

    .btn-secondary {
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--text);
    }

    .btn-secondary:hover {
      background: var(--surface-hover);
      border-color: var(--border-focus);
    }

    .btn-success {
      background: var(--success);
      color: white;
    }

    .btn-success:hover {
      background: #16a34a;
    }

    .btn-block {
      width: 100%;
    }

    .btn-group {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    /* Preview Panel */
    .preview-panel {
      position: sticky;
      top: 2rem;
      height: fit-content;
    }

    .preview-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .preview-title {
      font-size: 1.125rem;
      font-weight: 600;
    }

    .template-selector {
      display: flex;
      gap: 0.5rem;
    }

    .template-btn {
      padding: 0.5rem 1rem;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 0.875rem;
      cursor: pointer;
      transition: all var(--transition);
    }

    .template-btn:hover {
      background: var(--surface-hover);
    }

    .template-btn.active {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
    }

    .preview-container {
      background: white;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 3rem;
      min-height: 600px;
      box-shadow: var(--shadow);
      color: #000;
    }

    /* Invoice Templates */
    .invoice-preview {
      max-width: 800px;
      margin: 0 auto;
    }

    .invoice-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 3rem;
      flex-wrap: wrap;
      gap: 2rem;
    }

    .invoice-logo {
      max-width: 150px;
      max-height: 80px;
      object-fit: contain;
    }

    .invoice-title {
      font-size: 2.5rem;
      font-weight: 700;
      letter-spacing: -0.02em;
      color: var(--brand-color, #000);
    }

    .invoice-number {
      font-size: 1rem;
      color: #666;
      margin-top: 0.5rem;
    }

    .invoice-parties {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 3rem;
    }

    @media (max-width: 600px) {
      .invoice-parties {
        grid-template-columns: 1fr;
      }
    }

    .party-section h3 {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--brand-color, #666);
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .party-name {
      font-weight: 600;
      font-size: 1.125rem;
      margin-bottom: 0.25rem;
    }

    .party-details {
      color: #666;
      font-size: 0.9375rem;
      line-height: 1.6;
    }

    .invoice-meta {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-bottom: 3rem;
      padding: 1.5rem;
      background: #f9fafb;
      border-radius: 8px;
    }

    @media (max-width: 600px) {
      .invoice-meta {
        grid-template-columns: 1fr;
      }
    }

    .meta-item label {
      display: block;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #666;
      margin-bottom: 0.25rem;
      font-weight: 600;
    }

    .meta-item .value {
      font-weight: 600;
      font-size: 0.9375rem;
    }

    .invoice-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 2rem;
    }

    .invoice-table thead {
      border-bottom: 2px solid var(--brand-color, #000);
    }

    .invoice-table th {
      text-align: left;
      padding: 1rem 0.5rem;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-weight: 600;
      color: var(--brand-color, #000);
    }

    .invoice-table th:last-child,
    .invoice-table td:last-child {
      text-align: right;
    }

    .invoice-table tbody tr {
      border-bottom: 1px solid #e5e7eb;
    }

    .invoice-table td {
      padding: 1rem 0.5rem;
      font-size: 0.9375rem;
    }

    .invoice-totals {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 0.75rem;
      margin-bottom: 3rem;
    }

    .total-row {
      display: flex;
      justify-content: space-between;
      gap: 3rem;
      min-width: 300px;
    }

    .total-row.grand {
      font-size: 1.25rem;
      font-weight: 700;
      padding-top: 0.75rem;
      border-top: 2px solid var(--brand-color, #000);
      color: var(--brand-color, #000);
    }

    .invoice-notes {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid #e5e7eb;
    }

    .invoice-notes h3 {
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
    }

    .invoice-notes p {
      color: #666;
      font-size: 0.875rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    /* Payment Button */
    .payment-button {
      margin: 2rem 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }

    .payment-button a {
      display: inline-block;
      padding: 1rem 2rem;
      background: var(--brand-color, #6366f1);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 1rem;
      transition: all 0.2s;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .payment-button a:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .payment-button .payment-url {
      font-size: 0.75rem;
      color: #999;
      word-break: break-all;
    }

    /* Steep Branding Footer */
    .steep-footer {
      margin-top: 4rem;
      padding-top: 1.5rem;
      border-top: 1px solid #e5e7eb;
      text-align: center;
    }

    .steep-footer p {
      font-size: 0.75rem;
      color: #999;
      margin: 0;
    }

    .steep-footer a {
      color: #999;
      text-decoration: none;
    }

    .steep-footer a:hover {
      color: #666;
    }

    /* Template: Classic */
    .template-classic .invoice-title {
      text-align: center;
      font-size: 2rem;
      border-bottom: 3px double var(--brand-color, #000);
      padding-bottom: 1rem;
      margin-bottom: 2rem;
    }

    .template-classic .invoice-table {
      border: 2px solid var(--brand-color, #000);
    }

    .template-classic .invoice-table th {
      background: var(--brand-color, #000);
      color: white;
      padding: 0.75rem;
    }

    .template-classic .invoice-table td {
      padding: 0.75rem;
    }

    /* Template: Minimal */
    .template-minimal .invoice-title {
      font-weight: 300;
      font-size: 3rem;
    }

    .template-minimal .invoice-table thead {
      border-bottom: 1px solid #e5e7eb;
    }

    .template-minimal .invoice-totals {
      border-top: 1px solid #e5e7eb;
      padding-top: 1rem;
    }

    /* Mobile Preview Toggle */
    .mobile-preview-toggle {
      display: none;
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      z-index: 1000;
    }

    @media (max-width: 1023px) {
      .mobile-preview-toggle {
        display: block;
      }

      .preview-panel {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 999;
        background: var(--bg);
        overflow: hidden;
      }

      .preview-panel.show {
        display: flex;
        flex-direction: column;
      }

      .preview-panel .preview-header {
        background: var(--bg);
        padding: 1rem 1.5rem;
        border-bottom: 1px solid var(--border);
        flex-shrink: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .preview-panel .preview-container {
        flex: 1 1 0;
        overflow: auto;
        -webkit-overflow-scrolling: touch;
        margin: 0;
        border-radius: 0;
        border: none;
        overscroll-behavior: contain;
      }

      .preview-close {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 50%;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.25rem;
        color: var(--text);
        flex-shrink: 0;
      }
    }

    /* Dropdown Menus */
    .dropdown {
      position: relative;
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 0;
      margin-top: 0.5rem;
      background: var(--surface-elevated);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      box-shadow: var(--shadow);
      min-width: 200px;
      max-height: 300px;
      overflow-y: auto;
      display: none;
      z-index: 100;
    }

    .dropdown-menu.show {
      display: block;
    }

    .dropdown-item {
      padding: 0.75rem 1rem;
      cursor: pointer;
      transition: background var(--transition);
      font-size: 0.875rem;
      border-bottom: 1px solid var(--border);
    }

    .dropdown-item:last-child {
      border-bottom: none;
    }

    .dropdown-item:hover {
      background: var(--surface-hover);
    }

    .dropdown-item-empty {
      padding: 2rem 1rem;
      text-align: center;
      color: var(--text-tertiary);
      font-size: 0.875rem;
    }

    /* Toast Notifications */
    .toast {
      position: fixed;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--surface-elevated);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem 1.5rem;
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      gap: 0.75rem;
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1001;
      max-width: 400px;
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .toast-icon {
      font-size: 1.5rem;
    }

    /* Footer */
    .app-footer {
      text-align: center;
      padding: 3rem 1.5rem;
      margin-top: 4rem;
      border-top: 1px solid var(--border);
      color: var(--text-secondary);
      font-size: 0.875rem;
    }

    .app-footer a {
      color: var(--accent);
      text-decoration: none;
    }

    .app-footer a:hover {
      text-decoration: underline;
    }

    /* Loading State */
    .loading {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid currentColor;
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 0.6s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Utility Classes */
    .hidden {
      display: none !important;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }

    /* ==================== Landing Page Sections ==================== */

    /* Section Base Styles */
    .landing-section {
      padding: 5rem 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .landing-section h2 {
      font-size: clamp(1.75rem, 4vw, 2.5rem);
      font-weight: 700;
      text-align: center;
      margin-bottom: 1rem;
      letter-spacing: -0.02em;
    }

    .landing-section .section-subtitle {
      text-align: center;
      color: var(--text-secondary);
      font-size: 1.125rem;
      margin-bottom: 3rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* How It Works Section */
    .how-it-works {
      border-top: 1px solid var(--border);
    }

    .steps-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      margin-top: 3rem;
    }

    .step-card {
      text-align: center;
      padding: 2rem 1.5rem;
    }

    .step-number {
      width: 56px;
      height: 56px;
      background: var(--accent);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
      margin: 0 auto 1.5rem;
    }

    .step-card h3 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      margin-left: auto;
      margin-right: auto;
    }

    .step-card p {
      color: var(--text-secondary);
      font-size: 0.9375rem;
      line-height: 1.6;
      max-width: 260px;
      margin: 0 auto;
    }

    @media (max-width: 768px) {
      .steps-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }
    }

    /* Why Steep Features Section */
    .features-section {
      border-top: 1px solid var(--border);
      background: var(--surface);
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }

    .feature-card {
      background: var(--surface-elevated);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 2rem;
      transition: border-color var(--transition), transform var(--transition);
    }

    .feature-card:hover {
      border-color: var(--border-focus);
      transform: translateY(-2px);
    }

    .feature-icon {
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    .feature-card h3 {
      font-size: 1.125rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .feature-card p {
      color: var(--text-secondary);
      font-size: 0.9375rem;
      line-height: 1.5;
    }

    @media (max-width: 768px) {
      .features-grid {
        grid-template-columns: 1fr;
      }
    }

    /* FAQ Section */
    .faq-section {
      border-top: 1px solid var(--border);
    }

    .faq-list {
      max-width: 800px;
      margin: 0 auto;
    }

    .faq-item {
      border-bottom: 1px solid var(--border);
    }

    .faq-item summary {
      padding: 1.25rem 0;
      cursor: pointer;
      font-weight: 500;
      font-size: 1.0625rem;
      list-style: none;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: color var(--transition);
    }

    .faq-item summary::-webkit-details-marker {
      display: none;
    }

    .faq-item summary::after {
      content: '+';
      font-size: 1.5rem;
      font-weight: 300;
      color: var(--text-tertiary);
      transition: transform var(--transition);
    }

    .faq-item[open] summary::after {
      transform: rotate(45deg);
    }

    .faq-item summary:hover {
      color: var(--accent);
    }

    .faq-answer {
      padding: 0 0 1.5rem;
      color: var(--text-secondary);
      font-size: 0.9375rem;
      line-height: 1.7;
    }

    /* Enhanced Footer */
    .enhanced-footer {
      border-top: 1px solid var(--border);
      padding: 4rem 1.5rem 3rem;
      text-align: center;
      background: var(--surface);
    }

    .footer-trust {
      font-size: 1rem;
      color: var(--text);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .footer-trust-icon {
      font-size: 1.25rem;
    }

    .footer-links {
      display: flex;
      gap: 2rem;
      justify-content: center;
      margin-bottom: 2rem;
    }

    .footer-links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.9375rem;
      transition: color var(--transition);
    }

    .footer-links a:hover {
      color: var(--accent);
    }

    .footer-brand {
      color: var(--text-secondary);
      font-size: 0.9375rem;
      margin-bottom: 1rem;
    }

    .footer-brand .heart {
      color: #ef4444;
    }

    .footer-seo {
      color: var(--text-tertiary);
      font-size: 0.8125rem;
    }
  </style>
</head>
<body>
  <!-- Hero Section -->
  <section class="hero">
    <div class="brand"><img src="steepot_small.png" alt="Steep" class="brand-icon">Steep</div>
    <h1>Create invoices in 60 seconds</h1>
    <p class="tagline">Simple. Fast. No sign-up. Send it!</p>
    <p class="subtagline">We don‚Äôt store any of your data. All data is stored locally in your own browser üòé</p>
    <div class="trust-badges">
      <div class="badge">
        <div class="badge-icon">üö´</div>
        <div>No Account</div>
      </div>
      <div class="badge">
        <div class="badge-icon">üíØ</div>
        <div>100% Free</div>
      </div>
      <div class="badge">
        <div class="badge-icon">üìÑ</div>
        <div>PDF download</div>
      </div>
    </div>
  </section>

  <!-- App -->
  <div class="app-container">
    <!-- Header -->
    <div class="app-header">
      <div>
        <h2 class="section-title">Steep</h2>
      </div>
      <button class="theme-toggle" onclick="toggleTheme()">
        <span id="themeIcon">üåô</span>
        <span id="themeText">Dark Mode</span>
      </button>
    </div>

    <!-- Wizard Steps -->
    <div class="wizard-steps">
      <div class="step active" data-step="1" onclick="goToStep(1)">
        <div class="step-number">1</div>
        <div class="step-label">
          <div class="step-title">Your Business</div>
          <div class="step-desc">Logo, details, branding</div>
        </div>
      </div>
      <div class="step" data-step="2" onclick="goToStep(2)">
        <div class="step-number">2</div>
        <div class="step-label">
          <div class="step-title">Client Details</div>
          <div class="step-desc">Who you're billing</div>
        </div>
      </div>
      <div class="step" data-step="3" onclick="goToStep(3)">
        <div class="step-number">3</div>
        <div class="step-label">
          <div class="step-title">Line Items</div>
          <div class="step-desc">Services & products</div>
        </div>
      </div>
    </div>

    <!-- Wizard Container -->
    <div class="wizard-container">
      <!-- Form Panel -->
      <div class="form-panel">
        <!-- Step 1: Your Business -->
        <div class="form-section active" data-section="1">
          <h2 class="section-title">Your Business</h2>
          <p class="section-subtitle">Add your business details and branding</p>

          <div class="form-grid">
            <div class="form-group">
              <label for="businessName">Business Name *</label>
              <input type="text" id="businessName" placeholder="Acme Inc." oninput="updatePreview()">
            </div>

            <div class="form-grid form-grid-2">
              <div class="form-group">
                <label for="businessEmail">Email *</label>
                <input type="email" id="businessEmail" placeholder="hello@acme.com" oninput="updatePreview()">
              </div>
              <div class="form-group">
                <label for="businessPhone">Phone</label>
                <input type="tel" id="businessPhone" placeholder="+1 (555) 123-4567" oninput="updatePreview()">
              </div>
            </div>

            <div class="form-group">
              <label for="businessAddress">Address</label>
              <textarea id="businessAddress" placeholder="123 Main Street&#10;San Francisco, CA 94102" oninput="updatePreview()"></textarea>
            </div>

            <div class="form-grid form-grid-2">
              <div class="form-group">
                <label for="brandColor">Brand Color</label>
                <input type="color" id="brandColor" value="#6366f1" oninput="updatePreview()">
              </div>
              <div class="form-group">
                <label for="logo">Logo (optional)</label>
                <input type="file" id="logo" accept="image/*" onchange="handleLogoUpload(event)">
              </div>
            </div>
          </div>

          <button class="btn btn-primary btn-block" onclick="nextStep()">
            Continue to Client Details ‚Üí
          </button>
        </div>

        <!-- Step 2: Client Details -->
        <div class="form-section" data-section="2">
          <h2 class="section-title">Client Details</h2>
          <p class="section-subtitle">Who are you billing?</p>

          <div class="form-grid">
            <div class="form-group">
              <label for="clientName">Client Name *</label>
              <div class="dropdown">
                <input type="text" id="clientName" placeholder="Client Company" oninput="updatePreview(); filterClients()" autocomplete="off">
                <div class="dropdown-menu" id="clientDropdown"></div>
              </div>
            </div>

            <div class="form-grid form-grid-2">
              <div class="form-group">
                <label for="clientEmail">Client Email</label>
                <input type="email" id="clientEmail" placeholder="client@company.com" oninput="updatePreview()">
              </div>
              <div class="form-group">
                <label for="clientPhone">Client Phone</label>
                <input type="tel" id="clientPhone" placeholder="+1 (555) 987-6543" oninput="updatePreview()">
              </div>
            </div>

            <div class="form-group">
              <label for="clientAddress">Client Address</label>
              <textarea id="clientAddress" placeholder="456 Client Avenue&#10;New York, NY 10001" oninput="updatePreview()"></textarea>
            </div>

            <hr style="border: none; border-top: 1px solid var(--border); margin: 1rem 0;">

            <div class="form-group">
              <label for="docType">Document Type</label>
              <select id="docType" onchange="updatePreview()">
                <option value="invoice">Invoice</option>
                <option value="quote">Quote</option>
              </select>
            </div>

            <div class="form-grid form-grid-2">
              <div class="form-group">
                <label for="invoiceNumber" id="invoiceNumberLabel">Invoice Number *</label>
                <input type="text" id="invoiceNumber" placeholder="INV-001" oninput="updatePreview()">
              </div>
              <div class="form-group">
                <label for="currency">Currency</label>
                <select id="currency" onchange="updatePreview()">
                  <option value="USD">USD ($)</option>
                  <option value="CAD">CAD (C$)</option>
                  <option value="EUR">EUR (‚Ç¨)</option>
                  <option value="GBP">GBP (¬£)</option>
                  <option value="AUD">AUD (A$)</option>
                </select>
              </div>
            </div>

            <div class="form-grid form-grid-2">
              <div class="form-group">
                <label for="issueDate" id="issueDateLabel">Issue Date *</label>
                <input type="date" id="issueDate" oninput="updatePreview()">
              </div>
              <div class="form-group">
                <label for="dueDate" id="dueDateLabel">Due Date *</label>
                <input type="date" id="dueDate" oninput="updatePreview()">
              </div>
            </div>

            <div class="form-group">
              <label for="paymentLink">Payment Link (optional)</label>
              <input type="url" id="paymentLink" placeholder="https://pay.stripe.com/... or PayPal.me link" oninput="updatePreview()">
            </div>
          </div>

          <div class="btn-group">
            <button class="btn btn-secondary" onclick="prevStep()">
              ‚Üê Back
            </button>
            <button class="btn btn-primary" onclick="nextStep()" style="flex: 1;">
              Continue to Line Items ‚Üí
            </button>
          </div>
        </div>

        <!-- Step 3: Line Items -->
        <div class="form-section" data-section="3">
          <h2 class="section-title">Line Items</h2>
          <p class="section-subtitle">Add your services or products</p>

          <div class="line-items" id="lineItemsContainer"></div>

          <button class="btn btn-secondary btn-block" onclick="addLineItem()">
            + Add Line Item
          </button>

          <hr style="border: none; border-top: 1px solid var(--border); margin: 2rem 0;">

          <div class="form-grid form-grid-2">
            <div class="form-group">
              <label for="taxRate">Tax Rate (%)</label>
              <input type="number" id="taxRate" value="0" min="0" max="100" step="0.01" oninput="updatePreview()">
            </div>
            <div class="form-group">
              <label for="discount">Discount</label>
              <input type="number" id="discount" value="0" min="0" step="0.01" oninput="updatePreview()" placeholder="0.00">
            </div>
          </div>

          <div class="form-group">
            <label for="notes">Notes / Payment Terms</label>
            <textarea id="notes" placeholder="Payment due within 30 days. Bank details: ..." oninput="updatePreview()"></textarea>
          </div>

          <hr style="border: none; border-top: 1px solid var(--border); margin: 2rem 0;">

          <div class="form-group" style="margin-bottom: 1.5rem;">
            <label>Invoice Style</label>
            <div class="template-selector" id="stepTemplateSelector">
              <button class="template-btn active" data-template="modern" onclick="changeTemplate('modern')">Modern</button>
              <button class="template-btn" data-template="classic" onclick="changeTemplate('classic')">Classic</button>
              <button class="template-btn" data-template="minimal" onclick="changeTemplate('minimal')">Minimal</button>
            </div>
          </div>

          <div class="btn-group">
            <button class="btn btn-secondary" onclick="prevStep()">
              ‚Üê Back
            </button>
            <button class="btn btn-success" onclick="downloadPDF()" style="flex: 1;">
              üì• Download PDF
            </button>
          </div>

          <div class="btn-group" style="margin-top: 1rem;">
            <button class="btn btn-secondary" onclick="saveInvoice()">
              üíæ Save Invoice
            </button>
            <button class="btn btn-secondary" onclick="loadInvoice()">
              üìÇ Load Invoice
            </button>
            <button class="btn btn-secondary" onclick="newInvoice()">
              üìÑ New Invoice
            </button>
          </div>
        </div>
      </div>

      <!-- Preview Panel -->
      <div class="preview-panel">
        <div class="preview-header">
          <h3 class="preview-title">Live Preview</h3>
          <div style="display:flex; align-items:center; gap:0.75rem;">
            <div class="template-selector">
              <button class="template-btn active" data-template="modern" onclick="changeTemplate('modern')">Modern</button>
              <button class="template-btn" data-template="classic" onclick="changeTemplate('classic')">Classic</button>
              <button class="template-btn" data-template="minimal" onclick="changeTemplate('minimal')">Minimal</button>
            </div>
            <button class="preview-close" onclick="togglePreview()">‚úï</button>
          </div>
        </div>

        <div class="preview-container" id="invoicePreview">
          <div class="invoice-preview template-modern" id="invoiceContent">
            <!-- Invoice content will be rendered here -->
            <div class="invoice-header">
              <div>
                <img src="" alt="" class="invoice-logo hidden" id="previewLogo">
                <div class="invoice-title" id="previewTitle">INVOICE</div>
                <div class="invoice-number" id="previewNumber">#INV-001</div>
              </div>
            </div>

            <div class="invoice-parties">
              <div class="party-section">
                <h3>From</h3>
                <div class="party-name" id="previewBusinessName">Your Business</div>
                <div class="party-details">
                  <div id="previewBusinessEmail">hello@business.com</div>
                  <div id="previewBusinessPhone"></div>
                  <div id="previewBusinessAddress"></div>
                </div>
              </div>

              <div class="party-section">
                <h3 id="previewBillToLabel">Bill To</h3>
                <div class="party-name" id="previewClientName">Client Company</div>
                <div class="party-details">
                  <div id="previewClientEmail">client@company.com</div>
                  <div id="previewClientPhone"></div>
                  <div id="previewClientAddress"></div>
                </div>
              </div>
            </div>

            <div class="invoice-meta">
              <div class="meta-item">
                <label id="previewIssueLabel">Issue Date</label>
                <div class="value" id="previewIssueDate">-</div>
              </div>
              <div class="meta-item">
                <label id="previewDueLabel">Due Date</label>
                <div class="value" id="previewDueDate">-</div>
              </div>
              <div class="meta-item">
                <label>Currency</label>
                <div class="value" id="previewCurrency">USD</div>
              </div>
            </div>

            <table class="invoice-table">
              <thead>
                <tr>
                  <th>Description</th>
                  <th>Qty</th>
                  <th>Rate</th>
                  <th>Amount</th>
                </tr>
              </thead>
              <tbody id="previewLineItems">
                <tr>
                  <td colspan="4" style="text-align: center; color: #999; padding: 2rem;">
                    Add line items to see them here
                  </td>
                </tr>
              </tbody>
            </table>

            <div class="invoice-totals">
              <div class="total-row">
                <span>Subtotal:</span>
                <span id="previewSubtotal">$0.00</span>
              </div>
              <div class="total-row" id="previewDiscountRow" style="display: none;">
                <span>Discount:</span>
                <span id="previewDiscount">-$0.00</span>
              </div>
              <div class="total-row">
                <span>Tax (<span id="previewTaxRate">0</span>%):</span>
                <span id="previewTax">$0.00</span>
              </div>
              <div class="total-row grand">
                <span>Total:</span>
                <span id="previewTotal">$0.00</span>
              </div>
            </div>

            <div class="payment-button hidden" id="previewPaymentButton">
              <a href="#" id="previewPaymentLink" target="_blank">Pay Now</a>
              <div class="payment-url" id="previewPaymentUrl"></div>
            </div>

            <div class="invoice-notes hidden" id="previewNotesSection">
              <h3>Notes</h3>
              <p id="previewNotes"></p>
            </div>

            <div class="steep-footer">
              <p>Created with Steep ¬∑ <a href="https://steep.app" target="_blank">steep.app</a></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile Preview Toggle -->
    <button class="btn btn-primary mobile-preview-toggle" onclick="togglePreview()">
      üëÅÔ∏è Preview Invoice
    </button>
  </div>

  <!-- How It Works Section -->
  <section class="landing-section how-it-works">
    <h2>How It Works</h2>
    <p class="section-subtitle">Create professional invoices in three simple steps. No learning curve, no complexity.</p>
    <div class="steps-grid">
      <div class="step-card">
        <div class="step-number">1</div>
        <h3>Fill in Details</h3>
        <p>Add your business info, client details, and line items. We save your info for next time.</p>
      </div>
      <div class="step-card">
        <div class="step-number">2</div>
        <h3>Choose a Template</h3>
        <p>Pick from three professional designs. Customize colors to match your brand.</p>
      </div>
      <div class="step-card">
        <div class="step-number">3</div>
        <h3>Download PDF</h3>
        <p>Get a beautiful, print-ready invoice instantly. Send it to your client and get paid.</p>
      </div>
    </div>
  </section>

  <!-- Why Steep Section -->
  <section class="landing-section features-section">
    <h2>Why Steep?</h2>
    <p class="section-subtitle">Built for freelancers, small businesses, and anyone who hates complicated software.</p>
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">üöÄ</div>
        <h3>Ready in 60 Seconds</h3>
        <p>No sign-up, no onboarding. Just start invoicing. Your first invoice is one minute away.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üîí</div>
        <h3>100% Private</h3>
        <p>Your data never leaves your browser. Zero tracking, zero analytics, zero servers.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üì±</div>
        <h3>Mobile-First</h3>
        <p>Designed for phones first. Create invoices on the go, wherever you are.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üé®</div>
        <h3>3 Professional Templates</h3>
        <p>Clean, modern designs for any industry. Customize colors to match your brand.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üåó</div>
        <h3>Dark & Light Mode</h3>
        <p>Easy on the eyes, day or night. Automatic theme that respects your preference.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üí∞</div>
        <h3>Always Free</h3>
        <p>No hidden fees, no premium tiers, no ads. Free forever.</p>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="landing-section faq-section">
    <h2>Frequently Asked Questions</h2>
    <p class="section-subtitle">Everything you need to know about Steep.</p>
    <div class="faq-list">
      <details class="faq-item">
        <summary>Is Steep really free?</summary>
        <div class="faq-answer">Yes, 100% free with no hidden costs. We don't charge for downloads, templates, or any features. No credit card required, no trial period ‚Äî just free invoicing.</div>
      </details>
      <details class="faq-item">
        <summary>Do I need to create an account?</summary>
        <div class="faq-answer">No, never. No sign-up, no email required, no password to remember. Just open Steep and start creating invoices immediately.</div>
      </details>
      <details class="faq-item">
        <summary>Is my data safe?</summary>
        <div class="faq-answer">Absolutely. Steep runs entirely in your browser. Your invoice data is never sent to any server ‚Äî it stays on your device. We can't see your invoices even if we wanted to.</div>
      </details>
      <details class="faq-item">
        <summary>Can I customize my invoices?</summary>
        <div class="faq-answer">Yes! You can choose from three professional templates, customize your brand color, add your logo, and include payment links (PayPal, Venmo, etc.) for faster payments.</div>
      </details>
      <details class="faq-item">
        <summary>What format are invoices downloaded in?</summary>
        <div class="faq-answer">PDF ‚Äî the universal format that works on all devices and looks professional when printed. Your clients can open it on any computer, phone, or tablet.</div>
      </details>
      <details class="faq-item">
        <summary>Can I use Steep on my phone?</summary>
        <div class="faq-answer">Absolutely! Steep was designed mobile-first. The full experience works beautifully on phones and tablets, so you can create invoices on the go.</div>
      </details>
      <details class="faq-item">
        <summary>How is Steep different from other invoice generators?</summary>
        <div class="faq-answer">Most invoice tools require accounts, have cluttered interfaces, or hide features behind paywalls. Steep is modern, minimal, and truly free ‚Äî no sign-up, privacy-first, and built for mobile. It's the invoice tool we wished existed.</div>
      </details>
    </div>
  </section>

  <!-- FAQ Schema Markup -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Is Steep really free?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, 100% free with no hidden costs. We don't charge for downloads, templates, or any features. No credit card required, no trial period ‚Äî just free invoicing."
        }
      },
      {
        "@type": "Question",
        "name": "Do I need to create an account?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No, never. No sign-up, no email required, no password to remember. Just open Steep and start creating invoices immediately."
        }
      },
      {
        "@type": "Question",
        "name": "Is my data safe?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Absolutely. Steep runs entirely in your browser. Your invoice data is never sent to any server ‚Äî it stays on your device."
        }
      },
      {
        "@type": "Question",
        "name": "Can I customize my invoices?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! You can choose from three professional templates, customize your brand color, add your logo, and include payment links for faster payments."
        }
      },
      {
        "@type": "Question",
        "name": "What format are invoices downloaded in?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "PDF ‚Äî the universal format that works on all devices and looks professional when printed."
        }
      },
      {
        "@type": "Question",
        "name": "Can I use Steep on my phone?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Absolutely! Steep was designed mobile-first. The full experience works beautifully on phones and tablets."
        }
      },
      {
        "@type": "Question",
        "name": "How is Steep different from other invoice generators?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Most invoice tools require accounts, have cluttered interfaces, or hide features behind paywalls. Steep is modern, minimal, and truly free ‚Äî no sign-up, privacy-first, and built for mobile."
        }
      }
    ]
  }
  </script>

  <!-- Enhanced Footer -->
  <footer class="enhanced-footer">
    <div class="footer-trust">
      <span class="footer-trust-icon">üîí</span>
      <span>Your data stays in your browser. Nothing is sent to any server.</span>
    </div>
    <nav class="footer-links">
      <a href="#">About</a>
      <a href="#">Privacy</a>
      <a href="https://github.com/alexstuartharris/philbin" target="_blank" rel="noopener">GitHub</a>
    </nav>
    <p class="footer-brand">Made with <span class="heart">‚ù§Ô∏è</span> by Steep</p>
    <p class="footer-seo">Free Invoice Generator ¬∑ No Sign-Up Required ¬∑ Professional PDF Invoices</p>
  </footer>

  <!-- Toast Notification -->
  <div class="toast" id="toast">
    <span class="toast-icon" id="toastIcon">‚úì</span>
    <span id="toastMessage">Saved!</span>
  </div>

  <script>
    const { jsPDF } = window.jspdf;
    
    // State
    let currentStep = 1;
    let currentTemplate = 'modern';
    let logoDataUrl = null;
    let lineItemCounter = 0;
    
    const currencySymbols = {
      USD: '$',
      CAD: 'C$',
      EUR: '‚Ç¨',
      GBP: '¬£',
      AUD: 'A$'
    };

    // Initialize
    function init() {
      // Set default dates
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('issueDate').value = today;
      
      const dueDate = new Date();
      dueDate.setDate(dueDate.getDate() + 30);
      document.getElementById('dueDate').value = dueDate.toISOString().split('T')[0];
      
      // Generate initial invoice number
      generateInvoiceNumber();

      const docTypeEl = document.getElementById('docType');
      if(docTypeEl){
        docTypeEl.addEventListener('change', () => {
          const current = document.getElementById('invoiceNumber').value || '';
          if(!current || /^[A-Z]{3}-\d+/.test(current)){
            generateInvoiceNumber();
          }
        });
      }
      
      // Add initial line item
      addLineItem();
      
      // Load saved business info
      loadBusinessInfo();
      
      // Load theme preference
      const savedTheme = localStorage.getItem('invoiceGenTheme') || 'dark';
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
        document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
        document.getElementById('themeText').textContent = 'Light Mode';
      }
      
      // Initial preview update
      updatePreview();
    }

    // Navigation
    function goToStep(step) {
      if (step < 1 || step > 3) return;
      
      // Update step state
      currentStep = step;
      
      // Update UI
      document.querySelectorAll('.step').forEach(s => {
        const stepNum = parseInt(s.dataset.step);
        s.classList.toggle('active', stepNum === step);
        s.classList.toggle('completed', stepNum < step);
      });
      
      document.querySelectorAll('.form-section').forEach(section => {
        section.classList.toggle('active', parseInt(section.dataset.section) === step);
      });

      const wizard = document.querySelector('.wizard-container');
      if (wizard) {
        wizard.classList.toggle('wide-form', step === 3);
      }
    }

    function nextStep() {
      if (currentStep < 3) {
        goToStep(currentStep + 1);
      }
    }

    function prevStep() {
      if (currentStep > 1) {
        goToStep(currentStep - 1);
      }
    }

    // Line Items
    function addLineItem(description = '', quantity = 1, rate = 0) {
      const id = lineItemCounter++;
      const container = document.getElementById('lineItemsContainer');
      
      const div = document.createElement('div');
      div.className = 'line-item';
      div.dataset.id = id;
      div.innerHTML = `
        <div class="form-group">
          <label>Description</label>
          <input type="text" class="item-desc" value="${description}" placeholder="Website design" oninput="updatePreview()">
        </div>
        <div class="form-group">
          <label>Quantity</label>
          <input type="number" class="item-qty" value="${quantity}" min="0" step="0.01" oninput="updatePreview()">
        </div>
        <div class="form-group">
          <label>Rate</label>
          <input type="number" class="item-rate" value="${rate}" min="0" step="0.01" oninput="updatePreview()">
        </div>
        <div class="form-group">
          <label>Amount</label>
          <input type="text" class="item-amount" readonly value="${formatCurrency(quantity * rate)}">
        </div>
        <button class="remove-item-btn" onclick="removeLineItem(${id})" title="Remove item">
          √ó
        </button>
      `;
      
      container.appendChild(div);
      updatePreview();
    }

    function removeLineItem(id) {
      const item = document.querySelector(`.line-item[data-id="${id}"]`);
      if (item) {
        item.remove();
        updatePreview();
      }
    }

    // Preview
    function updatePreview() {
      // Business info
      const businessName = document.getElementById('businessName').value || 'Your Business';
      const businessEmail = document.getElementById('businessEmail').value || '';
      const businessPhone = document.getElementById('businessPhone').value || '';
      const businessAddress = document.getElementById('businessAddress').value || '';
      
      document.getElementById('previewBusinessName').textContent = businessName;
      document.getElementById('previewBusinessEmail').textContent = businessEmail;
      document.getElementById('previewBusinessPhone').textContent = businessPhone;
      document.getElementById('previewBusinessAddress').textContent = businessAddress;
      
      // Logo
      const logoEl = document.getElementById('previewLogo');
      if (logoDataUrl) {
        logoEl.src = logoDataUrl;
        logoEl.classList.remove('hidden');
      } else {
        logoEl.classList.add('hidden');
      }
      
      // Client info
      const clientName = document.getElementById('clientName').value || 'Client Company';
      const clientEmail = document.getElementById('clientEmail').value || '';
      const clientPhone = document.getElementById('clientPhone').value || '';
      const clientAddress = document.getElementById('clientAddress').value || '';
      
      document.getElementById('previewClientName').textContent = clientName;
      document.getElementById('previewClientEmail').textContent = clientEmail;
      document.getElementById('previewClientPhone').textContent = clientPhone;
      document.getElementById('previewClientAddress').textContent = clientAddress;
      
      // Document type
      const docType = document.getElementById('docType')?.value || 'invoice';
      const titleMap = { invoice: 'INVOICE', quote: 'QUOTE' };
      document.getElementById('previewTitle').textContent = titleMap[docType] || 'INVOICE';
      document.getElementById('previewBillToLabel').textContent = 'Bill To';
      document.getElementById('previewIssueLabel').textContent = 'Issue Date';
      document.getElementById('previewDueLabel').textContent = docType === 'quote' ? 'Valid Until' : 'Due Date';
      document.getElementById('invoiceNumberLabel').textContent = docType === 'quote' ? 'Quote Number *' : 'Invoice Number *';
      document.getElementById('issueDateLabel').textContent = 'Issue Date *';
      document.getElementById('dueDateLabel').textContent = docType === 'quote' ? 'Valid Until *' : 'Due Date *';

      // Invoice meta
      const invoiceNumber = document.getElementById('invoiceNumber').value || 'INV-001';
      const issueDate = document.getElementById('issueDate').value || '-';
      const dueDate = document.getElementById('dueDate').value || '-';
      const currency = document.getElementById('currency').value || 'USD';
      
      document.getElementById('previewNumber').textContent = '#' + invoiceNumber;
      document.getElementById('previewIssueDate').textContent = formatDate(issueDate);
      document.getElementById('previewDueDate').textContent = formatDate(dueDate);
      document.getElementById('previewCurrency').textContent = currency;
      
      // Line items
      const lineItems = document.querySelectorAll('.line-item');
      const tbody = document.getElementById('previewLineItems');
      tbody.innerHTML = '';
      
      let subtotal = 0;
      
      if (lineItems.length === 0) {
        tbody.innerHTML = '<tr><td colspan="4" style="text-align: center; color: #999; padding: 2rem;">Add line items to see them here</td></tr>';
      } else {
        lineItems.forEach(item => {
          const desc = item.querySelector('.item-desc').value || '-';
          const qty = parseFloat(item.querySelector('.item-qty').value) || 0;
          const rate = parseFloat(item.querySelector('.item-rate').value) || 0;
          const amount = qty * rate;
          
          subtotal += amount;
          
          // Update amount field
          item.querySelector('.item-amount').value = formatCurrency(amount);
          
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${desc}</td>
            <td>${qty}</td>
            <td>${formatCurrency(rate)}</td>
            <td>${formatCurrency(amount)}</td>
          `;
          tbody.appendChild(tr);
        });
      }
      
      // Totals
      const discount = parseFloat(document.getElementById('discount').value) || 0;
      const taxRate = parseFloat(document.getElementById('taxRate').value) || 0;
      
      const subtotalAfterDiscount = subtotal - discount;
      const tax = subtotalAfterDiscount * (taxRate / 100);
      const total = subtotalAfterDiscount + tax;
      
      document.getElementById('previewSubtotal').textContent = formatCurrency(subtotal);
      document.getElementById('previewTaxRate').textContent = taxRate.toFixed(2);
      document.getElementById('previewTax').textContent = formatCurrency(tax);
      document.getElementById('previewTotal').textContent = formatCurrency(total);
      
      // Discount row
      const discountRow = document.getElementById('previewDiscountRow');
      if (discount > 0) {
        discountRow.style.display = 'flex';
        document.getElementById('previewDiscount').textContent = '-' + formatCurrency(discount);
      } else {
        discountRow.style.display = 'none';
      }
      
      // Notes
      const notes = document.getElementById('notes').value;
      const notesSection = document.getElementById('previewNotesSection');
      if (notes) {
        notesSection.classList.remove('hidden');
        document.getElementById('previewNotes').textContent = notes;
      } else {
        notesSection.classList.add('hidden');
      }

      // Payment Link
      const paymentLink = document.getElementById('paymentLink').value;
      const paymentButton = document.getElementById('previewPaymentButton');
      if (paymentLink) {
        paymentButton.classList.remove('hidden');
        document.getElementById('previewPaymentLink').href = paymentLink;
        document.getElementById('previewPaymentUrl').textContent = paymentLink;
      } else {
        paymentButton.classList.add('hidden');
      }
      
      // Apply brand color to both UI accent and invoice preview
      const brandColor = document.getElementById('brandColor').value;
      document.documentElement.style.setProperty('--accent', brandColor);
      // Set brand color on the invoice content so it renders in preview AND PDF export
      document.getElementById('invoiceContent').style.setProperty('--brand-color', brandColor);
    }

    // Templates
    function changeTemplate(template) {
      currentTemplate = template;
      
      // Sync ALL template selectors (preview header + step 3)
      document.querySelectorAll('.template-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.template === template);
      });
      
      const content = document.getElementById('invoiceContent');
      content.className = `invoice-preview template-${template}`;
    }

    // Utilities
    function formatCurrency(amount) {
      const currency = document.getElementById('currency').value;
      const symbol = currencySymbols[currency] || '$';
      return symbol + amount.toFixed(2);
    }

    function formatDate(dateString) {
      if (!dateString) return '-';
      const date = new Date(dateString + 'T00:00:00');
      return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
    }

    function generateInvoiceNumber() {
      const invoices = getInvoices();
      const lastNumber = invoices.length > 0 ? 
        parseInt(invoices[0].invoiceNumber.replace(/\D/g, '')) || 0 : 0;
      const docType = document.getElementById('docType')?.value || 'invoice';
      const prefix = docType === 'quote' ? 'QTE' : 'INV';
      document.getElementById('invoiceNumber').value = `${prefix}-${String(lastNumber + 1).padStart(3, '0')}`;
    }

    // Logo Upload
    function handleLogoUpload(event) {
      const file = event.target.files[0];
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = function(e) {
          logoDataUrl = e.target.result;
          updatePreview();
        };
        reader.readAsDataURL(file);
      }
    }

    // Theme Toggle
    function toggleTheme() {
      const current = document.documentElement.getAttribute('data-theme');
      const newTheme = current === 'light' ? 'dark' : 'light';
      
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('invoiceGenTheme', newTheme);
      
      document.getElementById('themeIcon').textContent = newTheme === 'light' ? '‚òÄÔ∏è' : 'üåô';
      document.getElementById('themeText').textContent = newTheme === 'light' ? 'Light Mode' : 'Dark Mode';
    }

    // Mobile Preview Toggle
    function togglePreview() {
      const preview = document.querySelector('.preview-panel');
      preview.classList.toggle('show');
    }

    // localStorage Management
    function getBusinessInfo() {
      return {
        name: document.getElementById('businessName').value,
        email: document.getElementById('businessEmail').value,
        phone: document.getElementById('businessPhone').value,
        address: document.getElementById('businessAddress').value,
        brandColor: document.getElementById('brandColor').value,
        logo: logoDataUrl
      };
    }

    function loadBusinessInfo() {
      const saved = localStorage.getItem('invoiceGenBusiness');
      if (saved) {
        const data = JSON.parse(saved);
        document.getElementById('businessName').value = data.name || '';
        document.getElementById('businessEmail').value = data.email || '';
        document.getElementById('businessPhone').value = data.phone || '';
        document.getElementById('businessAddress').value = data.address || '';
        document.getElementById('brandColor').value = data.brandColor || '#6366f1';
        logoDataUrl = data.logo || null;
        updatePreview();
      }
    }

    function saveBusinessInfo() {
      localStorage.setItem('invoiceGenBusiness', JSON.stringify(getBusinessInfo()));
    }

    function getClients() {
      const saved = localStorage.getItem('invoiceGenClients');
      return saved ? JSON.parse(saved) : [];
    }

    function saveClient(client) {
      const clients = getClients();
      const existing = clients.findIndex(c => c.name === client.name);
      if (existing >= 0) {
        clients[existing] = client;
      } else {
        clients.unshift(client);
      }
      localStorage.setItem('invoiceGenClients', JSON.stringify(clients.slice(0, 20)));
    }

    function filterClients() {
      const input = document.getElementById('clientName').value.toLowerCase();
      const dropdown = document.getElementById('clientDropdown');
      const clients = getClients();
      
      if (input.length < 2) {
        dropdown.classList.remove('show');
        return;
      }
      
      const filtered = clients.filter(c => c.name.toLowerCase().includes(input));
      
      if (filtered.length === 0) {
        dropdown.classList.remove('show');
        return;
      }
      
      dropdown.innerHTML = filtered.map(client => `
        <div class="dropdown-item" onclick="selectClient('${client.name.replace(/'/g, "\\'")}')">
          <strong>${client.name}</strong><br>
          <small style="color: var(--text-tertiary);">${client.email || 'No email'}</small>
        </div>
      `).join('');
      
      dropdown.classList.add('show');
    }

    function selectClient(name) {
      const clients = getClients();
      const client = clients.find(c => c.name === name);
      if (client) {
        document.getElementById('clientName').value = client.name;
        document.getElementById('clientEmail').value = client.email || '';
        document.getElementById('clientPhone').value = client.phone || '';
        document.getElementById('clientAddress').value = client.address || '';
        updatePreview();
      }
      document.getElementById('clientDropdown').classList.remove('show');
    }

    function getInvoices() {
      const saved = localStorage.getItem('invoiceGenInvoices');
      return saved ? JSON.parse(saved) : [];
    }

    function saveInvoice() {
      // Save business info
      saveBusinessInfo();
      
      // Save client
      const client = {
        name: document.getElementById('clientName').value,
        email: document.getElementById('clientEmail').value,
        phone: document.getElementById('clientPhone').value,
        address: document.getElementById('clientAddress').value
      };
      if (client.name) {
        saveClient(client);
      }
      
      // Save invoice
      const lineItems = [];
      document.querySelectorAll('.line-item').forEach(item => {
        lineItems.push({
          description: item.querySelector('.item-desc').value,
          quantity: parseFloat(item.querySelector('.item-qty').value),
          rate: parseFloat(item.querySelector('.item-rate').value)
        });
      });
      
      const invoice = {
        id: Date.now(),
        docType: document.getElementById('docType')?.value || 'invoice',
        invoiceNumber: document.getElementById('invoiceNumber').value,
        date: new Date().toISOString(),
        business: getBusinessInfo(),
        client: client,
        lineItems: lineItems,
        taxRate: parseFloat(document.getElementById('taxRate').value),
        discount: parseFloat(document.getElementById('discount').value),
        notes: document.getElementById('notes').value,
        currency: document.getElementById('currency').value,
        issueDate: document.getElementById('issueDate').value,
        dueDate: document.getElementById('dueDate').value,
        paymentLink: document.getElementById('paymentLink').value,
        template: currentTemplate
      };
      
      const invoices = getInvoices();
      invoices.unshift(invoice);
      localStorage.setItem('invoiceGenInvoices', JSON.stringify(invoices.slice(0, 50)));
      
      showToast('‚úì', 'Invoice saved!');
    }

    function loadInvoice() {
      const invoices = getInvoices();
      if (invoices.length === 0) {
        showToast('‚ÑπÔ∏è', 'No saved invoices found');
        return;
      }
      
      // For now, load the most recent invoice
      // In a full version, we'd show a modal with a list
      const invoice = invoices[0];
      
      // Load business
      document.getElementById('businessName').value = invoice.business.name || '';
      document.getElementById('businessEmail').value = invoice.business.email || '';
      document.getElementById('businessPhone').value = invoice.business.phone || '';
      document.getElementById('businessAddress').value = invoice.business.address || '';
      document.getElementById('brandColor').value = invoice.business.brandColor || '#6366f1';
      logoDataUrl = invoice.business.logo || null;
      
      // Load client
      document.getElementById('clientName').value = invoice.client.name || '';
      document.getElementById('clientEmail').value = invoice.client.email || '';
      document.getElementById('clientPhone').value = invoice.client.phone || '';
      document.getElementById('clientAddress').value = invoice.client.address || '';
      
      // Load meta
      if(document.getElementById('docType')){
        document.getElementById('docType').value = invoice.docType || 'invoice';
      }
      document.getElementById('invoiceNumber').value = invoice.invoiceNumber || '';
      document.getElementById('currency').value = invoice.currency || 'USD';
      document.getElementById('issueDate').value = invoice.issueDate || '';
      document.getElementById('dueDate').value = invoice.dueDate || '';
      document.getElementById('taxRate').value = invoice.taxRate || 0;
      document.getElementById('discount').value = invoice.discount || 0;
      document.getElementById('notes').value = invoice.notes || '';
      document.getElementById('paymentLink').value = invoice.paymentLink || '';
      
      // Load line items
      document.getElementById('lineItemsContainer').innerHTML = '';
      lineItemCounter = 0;
      invoice.lineItems.forEach(item => {
        addLineItem(item.description, item.quantity, item.rate);
      });
      
      // Load template
      changeTemplate(invoice.template || 'modern');
      
      updatePreview();
      showToast('‚úì', 'Invoice loaded!');
    }

    function newInvoice() {
      if (confirm('Start a new invoice? Unsaved changes will be lost.')) {
        // Keep business info, clear everything else
        document.getElementById('clientName').value = '';
        document.getElementById('clientEmail').value = '';
        document.getElementById('clientPhone').value = '';
        document.getElementById('clientAddress').value = '';
        
        if(document.getElementById('docType')){
          document.getElementById('docType').value = 'invoice';
        }
        generateInvoiceNumber();
        
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('issueDate').value = today;
        const dueDate = new Date();
        dueDate.setDate(dueDate.getDate() + 30);
        document.getElementById('dueDate').value = dueDate.toISOString().split('T')[0];
        
        document.getElementById('taxRate').value = 0;
        document.getElementById('discount').value = 0;
        document.getElementById('notes').value = '';
        document.getElementById('paymentLink').value = '';
        
        document.getElementById('lineItemsContainer').innerHTML = '';
        lineItemCounter = 0;
        addLineItem();
        
        goToStep(1);
        updatePreview();
        showToast('‚úì', 'New invoice started');
      }
    }

    // PDF Generation
    async function downloadPDF() {
      const button = event.target.closest('button');
      const originalText = button.innerHTML;
      button.innerHTML = '<span class="loading"></span> Generating PDF...';
      button.disabled = true;
      
      try {
        // Save first
        saveInvoice();
        
        // On mobile, the preview panel may be hidden. Create an off-screen clone for capture.
        const source = document.getElementById('invoiceContent');
        const brandColor = document.getElementById('brandColor').value;
        const clone = source.cloneNode(true);
        clone.style.position = 'absolute';
        clone.style.left = '-9999px';
        clone.style.top = '0';
        clone.style.width = '800px';
        clone.style.background = '#ffffff';
        clone.style.color = '#000000';
        clone.style.padding = '3rem';
        clone.style.zIndex = '-1';
        clone.style.setProperty('--brand-color', brandColor);
        document.body.appendChild(clone);
        
        // Use html2canvas to capture the clone
        const canvas = await html2canvas(clone, {
          scale: 1,
          backgroundColor: '#ffffff',
          logging: false,
          useCORS: true,
          width: 800,
          windowWidth: 800
        });
        
        document.body.removeChild(clone);
        
        const imgData = canvas.toDataURL('image/jpeg', 1.0);
        
        // Create PDF
        const pdf = new jsPDF({
          orientation: 'portrait',
          unit: 'mm',
          format: 'a4'
        });
        
        const pdfWidth = pdf.internal.pageSize.getWidth();
        const pdfHeight = pdf.internal.pageSize.getHeight();
        const margin = 10;
        const contentWidth = pdfWidth - (margin * 2);
        const imgHeight = (canvas.height * contentWidth) / canvas.width;
        
        let heightLeft = imgHeight;
        let position = margin;
        
        // Add first page
        pdf.addImage(imgData, 'JPEG', margin, position, contentWidth, imgHeight);
        heightLeft -= (pdfHeight - margin * 2);
        
        // Add more pages if needed
        while (heightLeft > 0) {
          pdf.addPage();
          position = margin - (imgHeight - heightLeft);
          pdf.addImage(imgData, 'JPEG', margin, position, contentWidth, imgHeight);
          heightLeft -= (pdfHeight - margin * 2);
        }
        
        // Download
        const invoiceNumber = document.getElementById('invoiceNumber').value || 'document';
        const docType = document.getElementById('docType')?.value || 'invoice';
        pdf.save(`${docType}-${invoiceNumber}.pdf`);
        
        showToast('‚úì', 'PDF downloaded!');
      } catch (error) {
        console.error('PDF generation error:', error);
        showToast('‚ùå', 'PDF generation failed: ' + error.message);
      } finally {
        button.innerHTML = originalText;
        button.disabled = false;
      }
    }

    // Toast
    function showToast(icon, message) {
      const toast = document.getElementById('toast');
      const toastIcon = document.getElementById('toastIcon');
      const toastMessage = document.getElementById('toastMessage');
      
      toastIcon.textContent = icon;
      toastMessage.textContent = message;
      
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Close dropdowns on click outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.dropdown')) {
        document.querySelectorAll('.dropdown-menu').forEach(menu => {
          menu.classList.remove('show');
        });
      }
    });

    // Auto-save business info on change
    ['businessName', 'businessEmail', 'businessPhone', 'businessAddress', 'brandColor'].forEach(id => {
      document.getElementById(id).addEventListener('change', saveBusinessInfo);
    });

    // Initialize on load
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
